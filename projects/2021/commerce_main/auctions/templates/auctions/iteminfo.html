{% extends "auctions/layout.html" %}
{% load static %}

{% block title %}
{{post.title}}
{% endblock %}


{% block body %}

<br /><br /><br />
<div class="card-deck mb-3 text-center">
 <h2 class="text text-muted"> Item Detail </h2>
 <br />

 <div class="card mb-4 shadow-sm">
  <div class="card-header">
   <h4 class="my-0 font-weight-normal">{{ listing.title }}</h4>
  </div>
  <div class="card-body">
   <h1 class="card-title pricing-card-title">${{ listing.bid_price }} <small class="text-muted">/
     {{ listing.category}}</small>
   </h1>
   <ul class="list-unstyled mt-3 mb-4">
    <strong><small>Description:</small></strong>
    <li>{{ listing.description }}</li>
   </ul>
   <a href="{% url 'auctions:bid' listing.id %}">
    <button type="submit" class="btn btn-lg btn-block btn-outline-primary">Place your Bid</button>
   </a>
  </div>

 </div>
 <small class="text float-end"> By: {{ listing.person.first_name }} {{ listing.person.last_name }}</small>
</div>
<br /><br />
<h2>Comments....</h2>
<hr>

{% if not listing.comments.all %}
<small>No comment on this post yet ......
 <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"
  data-bs-whatever="@mdo">Comment on this item</button></small>
<br />

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
 <div class="modal-dialog">
  <div class="modal-content">
   <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Add New Comment</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
   </div>
   <div class="modal-body">
    <form>
     <div class="mb-3">
      <label for="recipient-name" class="col-form-label">Name:</label>
      <input type="text" class="form-control" id="recipient-name">
     </div>
     <div class="mb-3">
      <label for="message-text" class="col-form-label">Comment:</label>
      <textarea class="form-control" id="message-text"></textarea>
     </div>
    </form>
   </div>
   <div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    <button type="button" class="btn btn-primary">Send message</button>
   </div>
  </div>
 </div>
</div>



{% else %}
<a href="{% url 'auctions:add_comment' listing.id %}">Add a comment</a></small>
<br /><br />
{% for comment in listing.comments.all %}

<small><strong>
  {{ comment.name }}
  {{ comment.date_added }}
 </strong></small>
<p>{{ comment.body }}</p>


{% endfor %}

{% endif %}
<br />



{% endblock %}